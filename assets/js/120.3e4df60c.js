(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{636:function(t,e,v){"use strict";v.r(e);var _=v(2),a=Object(_.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"通过-react-native-cli-搭建环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通过-react-native-cli-搭建环境"}},[t._v("#")]),t._v(" 通过 "),e("em",[t._v("React Native CLI")]),t._v(" 搭建环境")]),t._v(" "),e("h2",{attrs:{id:"react-native-cli-搭建开发环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-native-cli-搭建开发环境"}},[t._v("#")]),t._v(" "),e("em",[t._v("React Native CLI")]),t._v(" 搭建开发环境")]),t._v(" "),e("blockquote",[e("p",[t._v("备注: 如果是 "),e("em",[t._v("macOS")]),t._v(" 系统电脑，可以搭建 "),e("em",[t._v("iOS")]),t._v(" 和 "),e("em",[t._v("Andriod")]),t._v(" 的环境，但是如果 "),e("em",[t._v("Windows")]),t._v(" 系统电脑，只能搭建 "),e("em",[t._v("Andriod")]),t._v(" 的环境。")])]),t._v(" "),e("p",[t._v("首先整体的依赖有：")]),t._v(" "),e("ul",[e("li",[e("em",[t._v("Node")])]),t._v(" "),e("li",[e("em",[t._v("Watchman")])]),t._v(" "),e("li",[e("em",[t._v("React Native command line interface")])]),t._v(" "),e("li",[e("em",[t._v("JDK")])]),t._v(" "),e("li",[e("em",[t._v("Android Studio")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-025840.png",alt:"image-20220720105840341"}})]),t._v(" "),e("p",[e("em",[t._v("Node")]),t._v(" 大家已经很熟悉了，而且大家都已经安装了，官方还推荐了一个叫做 "),e("em",[t._v("watchman")]),t._v(" 的工作，根据官方的描述“"),e("em",[t._v("Watchman")]),t._v(" 是 "),e("em",[t._v("Facebook")]),t._v(" 的一个工具，用于观察文件系统的变化。强烈建议您安装它以获得更好的性能。”")]),t._v(" "),e("p",[t._v("这里在安装的时候，还是推荐大家使用 "),e("em",[t._v("Homebrew")]),t._v(" 来进行安装，安装过程中如果遇到 "),e("em",[t._v("fatal: not in a git directory")]),t._v(" 错误，可以参阅：https://blog.csdn.net/Wbl752134268/article/details/125186635")]),t._v(" "),e("p",[t._v("安装完毕后可以通过 "),e("em",[t._v("watchman -v")]),t._v(" 命令来查看版本，如下：")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-025900.png",alt:"image-20220720105900213"}}),t._v(" "),e("blockquote",[e("p",[t._v("如果在安装 "),e("em",[t._v("Homebrew")]),t._v(' 时遇到问题，可以尝试使用国内镜像安装，命令为：\n/bin/zsh -c "$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)"')])]),t._v(" "),e("h3",{attrs:{id:"安装-jdk"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-jdk"}},[t._v("#")]),t._v(" 安装 "),e("em",[t._v("JDK")])]),t._v(" "),e("p",[t._v("搭建 "),e("em",[t._v("Android")]),t._v(" 开发环境需要 "),e("em",[t._v("Java")]),t._v(" 环境的支持，因此需要下载和安装操作系统对应的 "),e("em",[t._v("JDK")]),t._v(" 版本。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-025931.png",alt:"image-20220720105931006"}})]),t._v(" "),e("p",[t._v("官方推荐使用 "),e("em",[t._v("Homebrew")]),t._v(" 来进行安装，当然你也可以选择直接去 "),e("a",{attrs:{href:"https://www.oracle.com/java/technologies/downloads/",target:"_blank",rel:"noopener noreferrer"}},[e("em",[t._v("Java")]),t._v(" 的官网"),e("OutboundLink")],1),t._v("下载安装。")]),t._v(" "),e("p",[t._v("关于 "),e("em",[t._v("JDK")]),t._v(" 的安装，你可以在网上轻松的找到详细的说明，这里不再赘述。")]),t._v(" "),e("blockquote",[e("p",[e("em",[t._v("macOS")]),t._v(" 安装：https://www.jianshu.com/p/199cd1abd570 >"),e("em",[t._v("Windows")]),t._v(" 安装：https://www.cnblogs.com/maoning/p/10701349.html")])]),t._v(" "),e("p",[t._v("最后输入 "),e("em",[t._v("javac -version")]),t._v(" 能查看版本号，例如：")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-025950.png",alt:"image-20220720105950341"}}),t._v(" "),e("h3",{attrs:{id:"android-开发环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#android-开发环境"}},[t._v("#")]),t._v(" "),e("em",[t._v("Android")]),t._v(" 开发环境")]),t._v(" "),e("p",[t._v("如果你之前没有接触过 "),e("em",[t._v("Android")]),t._v(" 的开发环境，那么请做好心理准备，这一过程相当繁琐。")]),t._v(" "),e("p",[t._v("首先下载安装 "),e("a",{attrs:{href:"https://developer.android.google.cn/studio/",target:"_blank",rel:"noopener noreferrer"}},[e("em",[t._v("Andriod Studio")]),e("OutboundLink")],1)]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030051.png",alt:"image-20220720110051649"}})]),t._v(" "),e("p",[t._v("点击官网的下载，可能出现无法下载的情况，将下载地址的 "),e("em",[t._v("https")]),t._v(" 协议修改为 "),e("em",[t._v("http")]),t._v(" 即可。")]),t._v(" "),e("p",[t._v("安装好 "),e("em",[t._v("Andriod Studio")]),t._v(" 后，接下来需要安装 "),e("em",[t._v("Android SDK")]),t._v("，根据官网的描述，目前编译 "),e("em",[t._v("React Native")]),t._v(" 应用需要的是 "),e("em",[t._v("Android 11 (R)")]),t._v(" 版本的 "),e("em",[t._v("SDK")]),t._v("，可以在 "),e("em",[t._v("Android Studio")]),t._v(" 的 "),e("em",[t._v("SDK Manager")]),t._v(" 中选择安装各版本的 "),e("em",[t._v("SDK")]),t._v("。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030113.png",alt:"image-20220720110112615"}})]),t._v(" "),e("p",[t._v("根据官网下方的描述，安装对应的 "),e("em",[t._v("SDK")]),t._v(" 工具：")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030130.png",alt:"image-20220720110130176"}})]),t._v(" "),e("p",[t._v("根据官网的描述，接下来我们需要安装上图中框选的组件，但是第一次是无法选择的，因为没有选择 "),e("em",[t._v("Android SDK")]),t._v(" 的 "),e("em",[t._v("Location")]),t._v("，点击右侧的 "),e("em",[t._v("Edit")]),t._v("，先安装一个默认的 "),e("em",[t._v("Android SDK")]),t._v(" 版本，目前默认的是 "),e("em",[t._v("Andriod API 33")]),t._v("，展开 "),e("em",[t._v("Android 11 (R)")]),t._v("，勾选上图中框选的组件")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030148.png",alt:"image-20220720110148405"}})]),t._v(" "),e("p",[t._v('点击"SDK Tools"选项卡，同样勾中右下角的"Show Package Details"。展开"Android SDK Build-Tools"选项，确保选中了 React Native 所必须的 30.0.2 版本。你可以同时安装多个其他版本。')]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030206.png",alt:"image-20220720110205934"}})]),t._v(" "),e("p",[t._v('在"SDK Tools"选项卡，点击"NDK (Side by side)"，同样勾中右下角的"Show Package Details"，选择 20.1.5948944 版本。最后再勾选上"Android SDK Command-line Tools (latest)"。')]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030223.png",alt:"image-20220720110222974"}})]),t._v(" "),e("p",[t._v("最后点击 "),e("em",[t._v("Apply")]),t._v(" 来下载安装这些组件。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030247.png",alt:"image-20220720110247857"}})]),t._v(" "),e("p",[t._v("接下来需要配置 "),e("em",[t._v("ANDROID_SDK_ROOT")]),t._v(" 环境变量")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030303.png",alt:"image-20220720110302867"}})]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030321.png",alt:"image-20220720110321356"}}),t._v(" "),e("p",[t._v("通过 "),e("em",[t._v("vi ~/.zshrc")]),t._v(" 来打开这个配置文件（没有会自动新建），然后按 "),e("em",[t._v("i")]),t._v(" 键进入 "),e("em",[t._v("insert")]),t._v(" 模式，粘贴上面的配置，然后按 "),e("em",[t._v("Esc")]),t._v(" 键退出编辑模式，之后 :wq 保存退出")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030349.png",alt:"image-20220720110348986"}})]),t._v(" "),e("p",[t._v("接下来就是让上面的配置生效，按照官网的步骤操作即可：")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030404.png",alt:"image-20220720110404020"}}),t._v(" "),e("h3",{attrs:{id:"创建新项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建新项目"}},[t._v("#")]),t._v(" 创建新项目")]),t._v(" "),e("p",[t._v("接下来我们通过 "),e("em",[t._v("npx react-native init <项目名>")]),t._v(" 来创建新的项目")]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030425.png",alt:"image-20220720110425193"}}),t._v(" "),e("p",[t._v("接下来我们需要准备预览环境，你可以准备真机，也可以用模拟器。")]),t._v(" "),e("p",[t._v("真机首先第一步需要开启 USB 调试，不同的机器开启方式不一样，例如小米手机可以参阅如下文档：")]),t._v(" "),e("p",[t._v("https://jingyan.baidu.com/article/f71d60379ad6065bb641d1ac.html")]),t._v(" "),e("p",[t._v("接下来进入【开发者选项】，打开如下的开关")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-062040.png",alt:"image-20220720142040143"}}),t._v(" "),e("blockquote",[e("p",[t._v("连接之前，要确保手机和电脑在同一个网络里面，否则无法连接上 "),e("em",[t._v("Metro")]),t._v(" 服务器")])]),t._v(" "),e("p",[t._v("接下来执行 "),e("em",[t._v("npx react-native run-android")]),t._v(" 命令来启动整个项目")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030449.png",alt:"image-20220720110448705"}})]),t._v(" "),e("p",[t._v("此时会启动一个 "),e("em",[t._v("Metro")]),t._v(" 服务器，该服务器类似于 "),e("em",[t._v("webpack")]),t._v(" 中的 "),e("em",[t._v("webpack-dev-server")]),t._v("，能够实现代码热更新的效果。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030505.png",alt:"image-20220720110504925"}})]),t._v(" "),e("h2",{attrs:{id:"目录分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目录分析"}},[t._v("#")]),t._v(" 目录分析")]),t._v(" "),e("p",[t._v("接下来我们来分析一下使用 "),e("em",[t._v("React Native CLI")]),t._v(" 所搭建的项目的目录结构。")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030525.png",alt:"image-20220720110524782"}}),t._v(" "),e("p",[e("em",[t._v("React Native")]),t._v(" 工程的目录和文件说明如下表：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("目录文件")]),t._v(" "),e("th",[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("__test__")]),t._v(" "),e("td",[t._v("React Native 工程单元测试文件夹")])]),t._v(" "),e("tr",[e("td",[t._v("android")]),t._v(" "),e("td",[t._v("原生 Android 工程文件夹")])]),t._v(" "),e("tr",[e("td",[t._v("ios")]),t._v(" "),e("td",[t._v("原生 iOS 工程文件夹")])]),t._v(" "),e("tr",[e("td",[t._v("node_modules")]),t._v(" "),e("td",[t._v("React Native 工程依赖的第三方库")])]),t._v(" "),e("tr",[e("td",[t._v("index.js")]),t._v(" "),e("td",[t._v("React Native 工程入口文件")])]),t._v(" "),e("tr",[e("td",[t._v("package.json")]),t._v(" "),e("td",[t._v("React Native 工程配置文件")])])])])])}),[],!1,null,null,null);e.default=a.exports}}]);