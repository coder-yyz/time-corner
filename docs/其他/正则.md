# 正则

正则表达式是一种用于匹配和操作文本的强大工具，它是由一系列字符和特殊字符组成的模式，用于描述要匹配的文本模式。

正则表达式可以在文本中查找、替换、提取和验证特定的模式。

## 基本语法

- `.`：匹配除换行符以外的任意单个字符。
- `*`：匹配前面的字符零次或多次。
- `+`：匹配前面的字符一次或多次。
- `?`：匹配前面的字符零次或一次。
- `{n}`：匹配前面的字符恰好 n 次。
- `{n,}`：匹配前面的字符至少 n 次。
- `{n,m}`：匹配前面的字符至少 n 次，至多 m 次。
- `[]`：匹配括号内的任意一个字符。
- `[^]`：匹配不在括号内的任意一个字符。
- `|`：表示“或”，匹配左边或右边的表达式。
- `^`：匹配输入字符串的开始位置。
- `$`：匹配输入字符串的结束位置。
- `()`：用于分组，可以提取匹配的子字符串。
- `\`：转义字符，用于匹配特殊字符本身。
- `\d`：匹配数字，等价于 `[0-9]`。
- `\D`：匹配非数字字符，等价于 `[^0-9]`。
- `\w`：匹配字母、数字或下划线，等价于 `[a-zA-Z0-9_]`。
- `\W`：匹配非字母、数字或下划线，等价于 `[^a-zA-Z0-9_]`。
- `\s`：匹配空白字符（空格、制表符、换行符等），等价于 `[ \t\n\r\f\v]`。
- `\S`：匹配非空白字符，等价于 `[^ \t\n\r\f\v]`。
- `\b`：匹配单词边界。
- `\B`：匹配非单词边界。
- `(?=...)`：正向前瞻，匹配后面跟着指定模式的字符串。
- `(?!...)`：负向前瞻，匹配后面不跟着指定模式的字符串。
- `(?<=...)`：正向后顾，匹配前面跟着指定模式的字符串。
- `(?<!...)`：负向后顾，匹配前面不跟着指定模式的字符串。
- `(?P<name>...)`：命名分组，可以通过名称引用匹配的子字符串。
- `(?P=name)`：引用命名分组。
- `(?i)`：忽略大小写匹配。
- `(?m)`：多行模式，`^` 和 `$` 匹配每一行的开始和结束。
- `(?s)`：单行模式，`.` 匹配包括换行符在内的任意字符。
- `(?x)`：扩展模式，允许在正则表达式中使用空格和注释。
- `(?U)`：非贪婪模式，匹配尽可能少的字符。
- `(?P<name>...)`：命名分组，可以通过名称引用匹配的子字符串。
- `(?P=name)`：引用命名分组。

## 示例

匹配邮箱地址：`[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}`

解析：匹配一个或多个字母、数字、点、下划线、百分号、加号或减号，后跟一个 @ 符号，接着是一个或多个字母、数字、点或减号，最后是一个点和两个或更多字母。

匹配电话号码：`(\+?\d{1,3})?[-.\s]?(\(?\d{2,4}\)?)?[-.\s]?(\d{3,4})[-.\s]?(\d{4})`

解析：可选的国际区号（1-3位数字），后跟可选的空格、点或连字符，接着是可选的括号内的2-4位数字，后跟可选的空格、点或连字符，接着是3-4位数字，最后是4位数字。

匹配日期格式（YYYY-MM-DD）：`(\d{4})-(\d{2})-(\d{2})`

解析：匹配4位数字（年份），后跟一个连字符，接着是2位数字（月份），再跟一个连字符，最后是2位数字（日期）。

匹配URL：`https?://[a-zA-Z0-9.-]+(?:/[a-zA-Z0-9._%+-]*)*`

解析：匹配以 http:// 或 https:// 开头，后跟一个或多个字母、数字、点或减号，接着是可选的斜杠和一个或多个字母、数字、点、下划线、百分号、加号或减号。

匹配IP地址：`(?:\d{1,3}\.){3}\d{1,3}`

解析：匹配3个1-3位数字，后跟一个点，最后是1-3位数字。

匹配身份证号码：`(\d{17}|\d{15}|\d{18})`

解析：匹配15位或17位数字，或18位数字（最后一位可以是数字或字母X）。

匹配中文字符：`[\u4e00-\u9fa5]`

匹配非中文字符：`[^\u4e00-\u9fa5]`

匹配HTML标签：`<[^>]+>`

解析：匹配以 < 开头和 > 结尾的任意字符，表示HTML标签。

匹配JSON字符串：`"([^"\\]*(?:\\.[^"\\]*)*)"`

匹配Markdown链接：`\[([^\]]+)\]\(([^)]+)\)`

解析：匹配以 [ 开头和 ] 结尾的链接文本，后跟一个 ( 和 ) 包围的链接地址。

匹配Markdown图片：`!\[([^\]]+)\]\(([^)]+)\)`

解析：匹配以 [ 开头和 ] 结尾的链接文本，后跟一个 ( 和 ) 包围的链接地址。

匹配Markdown标题：`^(#{1,6})\s+(.*)$`

解析：匹配以1到6个井号开头的标题，后跟一个或多个空格和标题文本。

匹配Markdown列表：`^(\s*[-*+]|\d+\.)\s+(.*)$`

解析：匹配以空格、连字符、星号或加号开头的无序列表，或以数字和点开头的有序列表。

匹配Markdown代码块：`^```(?:\w+)?\n([\s\S]*?)\n```$`

解析：匹配以 ``` 开头和结尾的代码块，代码块可以有可选的语言标识。

匹配Markdown引用：`^>\s+(.*)$`

解析：匹配以 > 开头的引用行，后跟一个或多个空格和任意文本。

匹配Markdown表格：`^\|(.+)\|\n^\|[-:]+[-|:]*\|\n^(\|.+\|)$`

解析：匹配以 | 开头和结尾的表格行，包含至少一个单元格，第二行必须包含至少一个 - 或 :，第三行包含至少一个单元格。

## js中的正则表达式

在 JavaScript 中，正则表达式可以通过两种方式创建：
1. 使用字面量语法：`/pattern/flags`，比如 `/abc/i` 表示匹配字符串 "abc"，并且忽略大小写。
2. 使用构造函数：`new RegExp('pattern', 'flags')`，比如 `new RegExp('abc', 'i')`。
3. 正则表达式的标志（flags）可以是：
   - `g`：全局匹配，查找所有匹配项。
   - `i`：忽略大小写。
   - `m`：多行匹配，`^` 和 `$` 匹配每一行的开始和结束。
   - `s`：单行模式，`.` 匹配包括换行符在内的任意字符。
   - `u`：启用 Unicode 匹配。
   - `y`：粘性匹配，从字符串的当前位置开始匹配。

正则表达式对象在 JavaScript 中是一个内置的对象，可以使用以下方法：
- `test(string)`：测试字符串是否匹配正则表达式，返回布尔值。
- `exec(string)`：执行正则表达式匹配，返回一个数组或 null。
- `toString()`：返回正则表达式的字符串表示形式。
- `source`：返回正则表达式的模式部分。
- `flags`：返回正则表达式的标志部分。
- `lastIndex`：获取或设置下一个匹配的起始位置（仅在使用 `g` 或 `y` 标志时有效）。
- `compile(pattern, flags)`：重新编译正则表达式。
- `test()` 和 `exec()` 方法可以用于测试字符串是否匹配正则表达式。
- `match()` 方法可以用于在字符串中查找匹配项。
- `replace()` 方法可以用于替换字符串中的匹配项。
- `split()` 方法可以用于将字符串分割为数组。
- `search()` 方法可以用于查找字符串中匹配正则表达式的第一个位置。
- `matchAll()` 方法可以用于查找字符串中所有匹配正则表达式的结果。
