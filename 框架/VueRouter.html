<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VueRouter | Time Corner</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="前端学习笔记">
    
    <link rel="preload" href="/time-corner/assets/css/0.styles.0e7cd4b9.css" as="style"><link rel="preload" href="/time-corner/assets/js/app.0d27a2ae.js" as="script"><link rel="preload" href="/time-corner/assets/js/7.164cc000.js" as="script"><link rel="preload" href="/time-corner/assets/js/2.39a09933.js" as="script"><link rel="preload" href="/time-corner/assets/js/1.f4e644ad.js" as="script"><link rel="preload" href="/time-corner/assets/js/159.a9ce9724.js" as="script"><link rel="prefetch" href="/time-corner/assets/js/10.88b0b85b.js"><link rel="prefetch" href="/time-corner/assets/js/100.97b2cb43.js"><link rel="prefetch" href="/time-corner/assets/js/101.4e75ab70.js"><link rel="prefetch" href="/time-corner/assets/js/102.0b14aec4.js"><link rel="prefetch" href="/time-corner/assets/js/103.cdbf8ea4.js"><link rel="prefetch" href="/time-corner/assets/js/104.c6aefb73.js"><link rel="prefetch" href="/time-corner/assets/js/105.d74f4673.js"><link rel="prefetch" href="/time-corner/assets/js/106.51ead570.js"><link rel="prefetch" href="/time-corner/assets/js/107.9a334611.js"><link rel="prefetch" href="/time-corner/assets/js/108.9b901006.js"><link rel="prefetch" href="/time-corner/assets/js/109.bebf80d6.js"><link rel="prefetch" href="/time-corner/assets/js/11.476ca5d7.js"><link rel="prefetch" href="/time-corner/assets/js/110.0c1ece14.js"><link rel="prefetch" href="/time-corner/assets/js/111.e4b22dce.js"><link rel="prefetch" href="/time-corner/assets/js/112.7557eb2e.js"><link rel="prefetch" href="/time-corner/assets/js/113.e581b520.js"><link rel="prefetch" href="/time-corner/assets/js/114.72841e44.js"><link rel="prefetch" href="/time-corner/assets/js/115.5d0dc39e.js"><link rel="prefetch" href="/time-corner/assets/js/116.221dbf94.js"><link rel="prefetch" href="/time-corner/assets/js/117.ddb0a3d9.js"><link rel="prefetch" href="/time-corner/assets/js/118.d7e25734.js"><link rel="prefetch" href="/time-corner/assets/js/119.ab4d91b9.js"><link rel="prefetch" href="/time-corner/assets/js/120.053b5086.js"><link rel="prefetch" href="/time-corner/assets/js/121.fbc02c00.js"><link rel="prefetch" href="/time-corner/assets/js/122.cfe6f9e2.js"><link rel="prefetch" href="/time-corner/assets/js/123.eb592f45.js"><link rel="prefetch" href="/time-corner/assets/js/124.668ac337.js"><link rel="prefetch" href="/time-corner/assets/js/125.50861a9f.js"><link rel="prefetch" href="/time-corner/assets/js/126.01043b8a.js"><link rel="prefetch" href="/time-corner/assets/js/127.c5e230a8.js"><link rel="prefetch" href="/time-corner/assets/js/128.698b5c7a.js"><link rel="prefetch" href="/time-corner/assets/js/129.c92c6536.js"><link rel="prefetch" href="/time-corner/assets/js/130.70d0f3fd.js"><link rel="prefetch" href="/time-corner/assets/js/131.cddc7600.js"><link rel="prefetch" href="/time-corner/assets/js/132.f4c179c6.js"><link rel="prefetch" href="/time-corner/assets/js/133.137c9dde.js"><link rel="prefetch" href="/time-corner/assets/js/134.f906f62f.js"><link rel="prefetch" href="/time-corner/assets/js/135.22275af1.js"><link rel="prefetch" href="/time-corner/assets/js/136.3c5ca0a3.js"><link rel="prefetch" href="/time-corner/assets/js/137.bac8eee8.js"><link rel="prefetch" href="/time-corner/assets/js/138.cd0051be.js"><link rel="prefetch" href="/time-corner/assets/js/139.5a923a2b.js"><link rel="prefetch" href="/time-corner/assets/js/14.d5f97709.js"><link rel="prefetch" href="/time-corner/assets/js/140.9b6b96bf.js"><link rel="prefetch" href="/time-corner/assets/js/141.54abb9ed.js"><link rel="prefetch" href="/time-corner/assets/js/142.7dc35238.js"><link rel="prefetch" href="/time-corner/assets/js/143.b0cbd529.js"><link rel="prefetch" href="/time-corner/assets/js/144.af74bcad.js"><link rel="prefetch" href="/time-corner/assets/js/145.0960ff53.js"><link rel="prefetch" href="/time-corner/assets/js/146.89a55157.js"><link rel="prefetch" href="/time-corner/assets/js/147.a724ea98.js"><link rel="prefetch" href="/time-corner/assets/js/148.038306f6.js"><link rel="prefetch" href="/time-corner/assets/js/149.6b6cb657.js"><link rel="prefetch" href="/time-corner/assets/js/15.50094035.js"><link rel="prefetch" href="/time-corner/assets/js/150.51059355.js"><link rel="prefetch" href="/time-corner/assets/js/151.29521003.js"><link rel="prefetch" href="/time-corner/assets/js/152.c28833ff.js"><link rel="prefetch" href="/time-corner/assets/js/153.5347ce86.js"><link rel="prefetch" href="/time-corner/assets/js/154.21bda849.js"><link rel="prefetch" href="/time-corner/assets/js/155.64904b7d.js"><link rel="prefetch" href="/time-corner/assets/js/156.8083fc9a.js"><link rel="prefetch" href="/time-corner/assets/js/157.87c5443f.js"><link rel="prefetch" href="/time-corner/assets/js/158.0c4a79aa.js"><link rel="prefetch" href="/time-corner/assets/js/16.b28a5672.js"><link rel="prefetch" href="/time-corner/assets/js/160.c57f7bc9.js"><link rel="prefetch" href="/time-corner/assets/js/161.ebf6da87.js"><link rel="prefetch" href="/time-corner/assets/js/162.97999684.js"><link rel="prefetch" href="/time-corner/assets/js/163.b34a43fc.js"><link rel="prefetch" href="/time-corner/assets/js/164.e359a823.js"><link rel="prefetch" href="/time-corner/assets/js/165.027b3de7.js"><link rel="prefetch" href="/time-corner/assets/js/166.30b6932d.js"><link rel="prefetch" href="/time-corner/assets/js/167.b4c87741.js"><link rel="prefetch" href="/time-corner/assets/js/168.169b79e3.js"><link rel="prefetch" href="/time-corner/assets/js/169.fd389e57.js"><link rel="prefetch" href="/time-corner/assets/js/17.6c38b091.js"><link rel="prefetch" href="/time-corner/assets/js/170.495893a4.js"><link rel="prefetch" href="/time-corner/assets/js/171.a35e05d0.js"><link rel="prefetch" href="/time-corner/assets/js/18.49f8da1a.js"><link rel="prefetch" href="/time-corner/assets/js/19.6f273cff.js"><link rel="prefetch" href="/time-corner/assets/js/20.5f61bc66.js"><link rel="prefetch" href="/time-corner/assets/js/21.4482ba27.js"><link rel="prefetch" href="/time-corner/assets/js/22.6403ab12.js"><link rel="prefetch" href="/time-corner/assets/js/23.49344174.js"><link rel="prefetch" href="/time-corner/assets/js/24.3414d35e.js"><link rel="prefetch" href="/time-corner/assets/js/25.5b44ba15.js"><link rel="prefetch" href="/time-corner/assets/js/26.1ebeb21b.js"><link rel="prefetch" href="/time-corner/assets/js/27.e24f3e01.js"><link rel="prefetch" href="/time-corner/assets/js/28.16002380.js"><link rel="prefetch" href="/time-corner/assets/js/29.9fbce2fb.js"><link rel="prefetch" href="/time-corner/assets/js/3.24a0b34c.js"><link rel="prefetch" href="/time-corner/assets/js/30.f5a05b97.js"><link rel="prefetch" href="/time-corner/assets/js/31.14405f4b.js"><link rel="prefetch" href="/time-corner/assets/js/32.435d17a0.js"><link rel="prefetch" href="/time-corner/assets/js/33.0b4cc0e3.js"><link rel="prefetch" href="/time-corner/assets/js/34.c2dfe867.js"><link rel="prefetch" href="/time-corner/assets/js/35.aa922a92.js"><link rel="prefetch" href="/time-corner/assets/js/36.581c4627.js"><link rel="prefetch" href="/time-corner/assets/js/37.effb2d73.js"><link rel="prefetch" href="/time-corner/assets/js/38.c9393289.js"><link rel="prefetch" href="/time-corner/assets/js/39.e7fc667d.js"><link rel="prefetch" href="/time-corner/assets/js/4.bb34d5e7.js"><link rel="prefetch" href="/time-corner/assets/js/40.856fd7a2.js"><link rel="prefetch" href="/time-corner/assets/js/41.9bd54a76.js"><link rel="prefetch" href="/time-corner/assets/js/42.b2a54f9c.js"><link rel="prefetch" href="/time-corner/assets/js/43.fcf9eab2.js"><link rel="prefetch" href="/time-corner/assets/js/44.618de85e.js"><link rel="prefetch" href="/time-corner/assets/js/45.095aa64f.js"><link rel="prefetch" href="/time-corner/assets/js/46.a00627b5.js"><link rel="prefetch" href="/time-corner/assets/js/47.b7e73b42.js"><link rel="prefetch" href="/time-corner/assets/js/48.5d2158d0.js"><link rel="prefetch" href="/time-corner/assets/js/49.c35a6e1a.js"><link rel="prefetch" href="/time-corner/assets/js/5.891161d8.js"><link rel="prefetch" href="/time-corner/assets/js/50.ee721da9.js"><link rel="prefetch" href="/time-corner/assets/js/51.ae4df95b.js"><link rel="prefetch" href="/time-corner/assets/js/52.86be29f5.js"><link rel="prefetch" href="/time-corner/assets/js/53.2a166c0b.js"><link rel="prefetch" href="/time-corner/assets/js/54.1d43bab4.js"><link rel="prefetch" href="/time-corner/assets/js/55.ab4fbb0b.js"><link rel="prefetch" href="/time-corner/assets/js/56.288a389a.js"><link rel="prefetch" href="/time-corner/assets/js/57.22390d74.js"><link rel="prefetch" href="/time-corner/assets/js/58.cf154920.js"><link rel="prefetch" href="/time-corner/assets/js/59.40ba7ebf.js"><link rel="prefetch" href="/time-corner/assets/js/6.0db50380.js"><link rel="prefetch" href="/time-corner/assets/js/60.14a033a2.js"><link rel="prefetch" href="/time-corner/assets/js/61.081fc25c.js"><link rel="prefetch" href="/time-corner/assets/js/62.c1581b84.js"><link rel="prefetch" href="/time-corner/assets/js/63.00201b26.js"><link rel="prefetch" href="/time-corner/assets/js/64.9b82af60.js"><link rel="prefetch" href="/time-corner/assets/js/65.b2d393bb.js"><link rel="prefetch" href="/time-corner/assets/js/66.dc5ef7e7.js"><link rel="prefetch" href="/time-corner/assets/js/67.4b37ec5c.js"><link rel="prefetch" href="/time-corner/assets/js/68.71df06ce.js"><link rel="prefetch" href="/time-corner/assets/js/69.0f20523d.js"><link rel="prefetch" href="/time-corner/assets/js/70.2cfc88e5.js"><link rel="prefetch" href="/time-corner/assets/js/71.ff58ca21.js"><link rel="prefetch" href="/time-corner/assets/js/72.e1a7c554.js"><link rel="prefetch" href="/time-corner/assets/js/73.2259662e.js"><link rel="prefetch" href="/time-corner/assets/js/74.ae325cb1.js"><link rel="prefetch" href="/time-corner/assets/js/75.aefea008.js"><link rel="prefetch" href="/time-corner/assets/js/76.d119dbdf.js"><link rel="prefetch" href="/time-corner/assets/js/77.dfe7f568.js"><link rel="prefetch" href="/time-corner/assets/js/78.059a1151.js"><link rel="prefetch" href="/time-corner/assets/js/79.f7b64c5d.js"><link rel="prefetch" href="/time-corner/assets/js/8.6f4c46a7.js"><link rel="prefetch" href="/time-corner/assets/js/80.a2a5c5c5.js"><link rel="prefetch" href="/time-corner/assets/js/81.a12d40aa.js"><link rel="prefetch" href="/time-corner/assets/js/82.14bdc103.js"><link rel="prefetch" href="/time-corner/assets/js/83.f6548457.js"><link rel="prefetch" href="/time-corner/assets/js/84.d2b3b72a.js"><link rel="prefetch" href="/time-corner/assets/js/85.9dbe79c4.js"><link rel="prefetch" href="/time-corner/assets/js/86.dc6c6de6.js"><link rel="prefetch" href="/time-corner/assets/js/87.1feb3c90.js"><link rel="prefetch" href="/time-corner/assets/js/88.3dca1d9f.js"><link rel="prefetch" href="/time-corner/assets/js/89.d8b25365.js"><link rel="prefetch" href="/time-corner/assets/js/9.adb20991.js"><link rel="prefetch" href="/time-corner/assets/js/90.f8567039.js"><link rel="prefetch" href="/time-corner/assets/js/91.76f136cc.js"><link rel="prefetch" href="/time-corner/assets/js/92.7a4a9559.js"><link rel="prefetch" href="/time-corner/assets/js/93.e83b5f6a.js"><link rel="prefetch" href="/time-corner/assets/js/94.68eddd47.js"><link rel="prefetch" href="/time-corner/assets/js/95.55c95b6f.js"><link rel="prefetch" href="/time-corner/assets/js/96.8a43e970.js"><link rel="prefetch" href="/time-corner/assets/js/97.c4a4e50c.js"><link rel="prefetch" href="/time-corner/assets/js/98.a8eaf396.js"><link rel="prefetch" href="/time-corner/assets/js/99.5668353f.js"><link rel="prefetch" href="/time-corner/assets/js/vendors~docsearch.6bfdef0f.js">
    <link rel="stylesheet" href="/time-corner/assets/css/0.styles.0e7cd4b9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Time Corner</h3> <p class="description" data-v-59e6cb88>前端学习笔记</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2025
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/time-corner/" class="home-link router-link-active"><!----> <span class="site-name">Time Corner</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/time-corner/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      关于我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/coder-yyz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>123</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/time-corner/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      关于我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/coder-yyz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/time-corner/" aria-current="page" class="sidebar-link">主页</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/time-corner/低代码/" class="sidebar-heading clickable"><span>低代码</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/time-corner/其他/" class="sidebar-heading clickable"><span>其他</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/time-corner/前端基础/" class="sidebar-heading clickable"><span>前端基础</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/time-corner/手写实现/" class="sidebar-heading clickable"><span>手写实现</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/time-corner/框架/" class="sidebar-heading clickable open"><span>框架</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/time-corner/框架/Vue2/" class="sidebar-heading clickable open"><span>Vue2</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/time-corner/框架/Vue2/Vue2响应式实现原理.html" class="sidebar-link">Vue2响应式实现原理</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/time-corner/框架/Vue3/" class="sidebar-heading clickable"><span>Vue3</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/time-corner/框架/React/" class="sidebar-heading clickable"><span>React</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/time-corner/%E6%A1%86%E6%9E%B6/ReactNative/" class="sidebar-link">ReactNative</a></li><li><a href="/time-corner/框架/VueRouter.html" class="active sidebar-link">VueRouter</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/time-corner/框架/构建工具/" class="sidebar-heading clickable"><span>构建工具</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/time-corner/算法/" class="sidebar-heading clickable"><span>算法</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/time-corner/面试/" class="sidebar-heading clickable"><span>面试</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2025
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">VueRouter</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="vuerouter"><a href="#vuerouter" class="header-anchor">#</a> VueRouter</h1> <h2 id="什么是前端路由"><a href="#什么是前端路由" class="header-anchor">#</a> 什么是前端路由</h2> <p>实际上在最早的多页应用时代，并不存在前端路由这么一说，那个时候路由是属于后端（服务器端）的东西，后端会根据不同的请求路由返回不同的页面。</p> <img src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2024-04-16-235256.jpg" alt="16925848313024" style="zoom:50%;"> <p>在此开发时期有两个特点：</p> <ul><li>整个项目的前后端代码是杂糅在一起的。</li> <li>多页应用时代，每次切换一个页面，都需要重新请求服务器。</li></ul> <p>后面慢慢就到了单页应用时代，该时代的特点就是只有一个 HTML 页面，以前视图的切换是整个 HTML 页面的切换，而现在视图的切换是页面上某个模块的切换。</p> <img src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2024-04-16-235800.jpg" alt="16925848668499" style="zoom:50%;"> <p>上图中的模块其实就是对应 Vue 中不同的组件，这种组件我们称之为页面级组件。有了页面级组件，需要和路由产生一个映射关系，这个其实就是前端路由。</p> <p>虽然有了前端路由，但是后端路由仍然存在，只不过从之前的路由和页面的映射关系变成了路由和数据接口之间的映射关系。</p> <h2 id="vue生态的前端路由"><a href="#vue生态的前端路由" class="header-anchor">#</a> Vue生态的前端路由</h2> <p>Vue生态的前端路由是由 Vue 官方推出的，叫做 Vue Router：https://router.vuejs.org/zh/</p> <p>首先第一步，需要安装该路由库：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> vue-router@4
</code></pre></div><p><strong>快速入门</strong></p> <ol><li>创建两个页面级别的组件，放在 views 目录下面。</li> <li>在 src 下面创建一个 router 目录，用于存放前端路由配置，然后在该目录下面创建一个 index.js，该文件写具体的路由配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 前端路由配置文件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token comment">// 页面组件</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'../views/Home.vue'</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'../views/About.vue'</span>

<span class="token comment">// 该方法会创建一个路由的实例</span>
<span class="token comment">// 在创建路由实例的时候，可以传入一个配置对象</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 指定前端路由的模式，常见的有 hash 和 history 两种模式</span>
  <span class="token comment">// 路由和组件的映射</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token comment">// 路由的路径</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> Home <span class="token comment">// 路由对应的组件</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'About'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> About
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre></div><ol start="3"><li>需要将该配置所导出的路由实例在 main.js 入口文件中进行挂载</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>

<span class="token comment">// 引入路由实例</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'@/router'</span>
<span class="token comment">// ...</span>
<span class="token comment">// 挂载</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><ol start="4"><li>接下来就可以在组件中使用了</li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>欢迎来到Vue-router快速入门示例<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 该组件由 vue-router 这个库提供的 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 由 vue-router 这个库提供的 --&gt;</span>
    <span class="token comment">&lt;!-- 路由所匹配上的组件，会渲染到这个位置 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>上面会用到两个由 vue-router 库为我们提供的组件：</p> <ul><li>router-link：指示具体的跳转路由路径</li> <li>router-view：显示匹配的路由所对应的组件</li></ul> <h2 id="路由模式"><a href="#路由模式" class="header-anchor">#</a> 路由模式</h2> <p>Vue-router支持 3 种模式：</p> <ol><li>Hash模式</li> <li>HTML5模式（History模式）</li> <li>Memory模式</li></ol> <p><strong>Hash模式</strong></p> <p>Hash <strong>是 URL 组成的一部分</strong>，例如：</p> <div class="language- extra-class"><pre class="language-text"><code>https://www.example.com:80/path/to/myfile.html?key1=value1&amp;key2=value2#anchor
</code></pre></div><p>其 # 后面的部分就是 Hash 部分。<strong>早期 Hash 更多是被用作锚点</strong>：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>target<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>go target<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
......
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>target<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>i am target place<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在上面代码中，点击 <a> 链接，文档会滚动到 id.target 的 div 的位置。</a></p> <p>Hash另一个重要特性：<strong>Hash 的变化不会请求服务器</strong></p> <p>利用该特性可以实现不同 URL 映射不同的模块。</p> <p>#a ---&gt; A</p> <p>#b ---&gt; B</p> <p>Vue-router中如何使用 Hash 模式？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// router/index.js</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>import.meta.env.BASE_URL 是 Vite 里面提供的一个环境变量，默认是应用的根路径</p> <ul><li>开发环境，默认值是 '/'</li> <li>生产环境，这个值可以在 vite.config.js 里面的 base 中来指定</li></ul> <p><strong>HTML5模式</strong></p> <p>HTML5 模式也被称之为 History 模式。该模式利用 HTML5 的 <strong>HistoryAPI 来管理浏览器的历史记录</strong>从而实现单页应用。</p> <p>History API：</p> <ol><li>history.pushState(state, title, url)：将一个状态推入到历史堆栈里面</li> <li>history.replaceState(state, title, url)：替换当前历史堆栈最上面的状态</li> <li>window.onpopstate：这是一个事件，当用户点击浏览器的前进或者后退按钮的时候，会触发该事件</li></ol> <p><strong>1. History实现原理</strong></p> <p>工作原理：</p> <ol><li>拦截链接点击事件
<ul><li>客户端路由器会<strong>拦截</strong>页面上的<strong>所有链接点击事件</strong>（通常是通过阻止链接的默认行为 event.preventDefault( )）</li> <li>取而代之的是，<strong>路由器使用 history.pushState 或 history.replaceState 更新 URL</strong>。</li></ul></li> <li>URL 变化处理:
<ul><li>当 URL 变化时，路由器会捕捉到这个变化。</li> <li>路由器不会发出新的 HTTP 请求，而是根据新的 URL 查找预先定义好的路由规则，并加载相应的视图组件</li></ul></li></ol> <p>举个例子，假设有一个单页应用，使用 history 模式，并且有以下路由规则：</p> <ul><li>/home: 显示主页内容</li> <li>/about: 显示关于页面内容</li></ul> <p>当用户点击导航链接从 /home 切换到 /about 时，流程如下：</p> <ol><li>用户点击链接 <a href="/about">About</a></li> <li>路由器拦截点击事件，调用 event.preventDefault( ) 阻止浏览器的默认行为（即不发出 HTTP 请求）</li> <li>路由器调用 history.pushState(null, '', '/about') 更新浏览器的地址栏 URL 为 /about</li> <li>路由器检测到 URL 变化，查找路由规则，发现 /about 对应的视图组件</li> <li>路由器加载并渲染 /about 视图组件，将其插入到页面的特定位置</li></ol> <p>整个过程中，浏览器地址栏的 URL 更新了，但没有发出新的 HTTP 请求，所有的视图更新都是在客户端完成的。</p> <p><strong>实战</strong>：使用 History 实现单页应用</p> <p>Vue-router中如何使用 History 模式？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// router/index.js</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>History存在的问题</strong></p> <p>一旦刷新，就会报 404 错误。</p> <p>思考🤔 为什么会这样？</p> <p>答案：当你刷新的时候，是会请求服务器的。但是服务器并没有这个后端路由，这个仅仅是一个前端路由。</p> <p>要解决这个问题，需要在服务器上面做一些配置。添加一个回退路由，如果 URL 不匹配任何的静态资源，回退到首页。</p> <p><strong>Memory模式</strong></p> <p>无论是 Hash 也好、History API 也好，本质上都是<strong>基于浏览器的特性</strong>来实现的。</p> <p>而 Memory 模式<strong>一般用于非浏览器环境</strong>，例如 Node 或者 SSR.  因为是非浏览器环境，所以不会有 URL 交互也<strong>不会自动触发初始导航</strong>。</p> <p>该模式用 createMemoryHistory( ) 创建，并且需要<strong>在调用 app.use(router) 之后手动 push 到初始导航</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createMemoryHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createMemoryHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="内置组件和函数"><a href="#内置组件和函数" class="header-anchor">#</a> 内置组件和函数</h2> <h3 id="内置组件"><a href="#内置组件" class="header-anchor">#</a> 内置组件</h3> <p><strong>1. RouterLink</strong></p> <p>2个样式类：</p> <ol><li><p>activeClass：当链接所指向的路径<strong>匹配</strong>当前路由路径时，应用于该链接的 CSS 类，默认类名为 linkActiveClass</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">activeClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-active<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>当前路径是 /about：会应用 my-active 样式类</li> <li>当前路径是 /about/team：会应用 my-active 样式类</li></ul></li> <li><p>exactActiveClass：当链接所指向的路径<strong>精确匹配</strong>当前路由路径时，应用于该链接的 CSS 类，默认类名为 linkExactActiveClass</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">exactActiveClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-exact-active<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>当前路径是 /about：会应用 my-exact-active 样式类</li> <li>当前路径是 /about/team：不会应用 my-exact-active 样式类</li></ul></li></ol> <p><strong>2. RouterView</strong></p> <p>称之为<strong>视图</strong>或<strong>路由出口</strong></p> <p>RouterView 组件暴露了一个插槽（作用域插槽），<strong>这个插槽可以用来获取当前匹配的路由组件</strong>。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>思考🤔：获取到当前所匹配的组件有啥用呢？</p> <p>答案：主要就是为了方便扩展一些其他的功能。</p> <p><strong>KeepAlive &amp; Transition</strong></p> <p>当在处理 KeepAlive 组件时，我们通常想要保持对应的路由组件活跃，而不是 RouterView 本身。为了实现这个目的，我们可以将 KeepAlive 组件放置在插槽内：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>类似地，插槽允许我们使用一个 Transition 组件来实现在路由组件之间切换时实现过渡效果：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>两者结合后的嵌套顺序：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>模板引用</strong></p> <p>使用插槽可以让我们直接将模板引用放置在路由组件上。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 我现在要引用组件内部的模板 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mainContent<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果将 ref 挂在 router-view 上面，那么最终拿到的是 router-view 的引用，而非所匹配的组件本身。</p> <h3 id="内置函数"><a href="#内置函数" class="header-anchor">#</a> 内置函数</h3> <p><strong>1. useRouter和useRoute</strong></p> <p><strong>在 setup 中没有 this</strong>，因此无法像 Vue2 那样通过 this.$router 或者 this.$route 来访问路由实例和当前路由</p> <p>与之替代的就是通过 useRouter 和 useRoute 这两个内置函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter<span class="token punctuation">,</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 拿到的就是整个路由实例</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 拿到的是当前路由</span>

<span class="token keyword">function</span> <span class="token function">pushWithQuery</span><span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'search'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>route<span class="token punctuation">.</span>query<span class="token punctuation">,</span>
      <span class="token operator">...</span>query<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>另外，在模板中可以直接访问 $router 和 $route，所以如果只在模板中使用这些对象的话，那就不需要 useRouter 或 useRoute.</p> <p><strong>2. useLink</strong></p> <p>useLink 主要用于<strong>自定义导航组件的时候使用</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>
  <span class="token comment">// 解析出来的路由对象</span>
  route<span class="token punctuation">,</span>
  <span class="token comment">// 用在链接里的 href</span>
  href<span class="token punctuation">,</span>
  <span class="token comment">// 布尔类型的 ref 标识链接是否匹配当前路由</span>
  isActive<span class="token punctuation">,</span>
  <span class="token comment">// 布尔类型的 ref 标识链接是否严格匹配当前路由</span>
  isExactActive<span class="token punctuation">,</span>
  <span class="token comment">// 导航至该链接的函数</span>
  navigate
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLink</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token comment">// 这里接收的props类似于RouterLink所有props</span>
</code></pre></div><h2 id="导航守卫"><a href="#导航守卫" class="header-anchor">#</a> 导航守卫</h2> <p>所谓导航守卫，就是在当你进行导航的时候将其拦截下来，从而方便做一些其他的事情。</p> <p><strong>快速上手</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 全局导航守卫</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 回调函数里面决定了拦截下来后做什么</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'from:'</span><span class="token punctuation">,</span> from<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'to:'</span><span class="token punctuation">,</span> to<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'导航到：'</span><span class="token punctuation">,</span> to<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 调用该方法代表放行</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这是一个全局导航守卫，回调会自动传入 3 个参数：</p> <ul><li>to：即将要<strong>进入的目标路由</strong>，是一个<strong>对象</strong>，对象里面有 path、fullPath、hash、params 等参数</li> <li>from：当前导航<strong>正要离开的路由</strong>，同样是一个对象，对象内部有上述参数</li> <li>next：是一个函数，表示导航放行</li></ul> <p><strong>各种拦截守卫</strong></p> <p>整体分为 3 大类：</p> <ol><li><p>全局守卫</p> <ul><li>beforeEach：全局前置守卫，会<strong>在解析组件守卫和异步路由组件之前被调用</strong></li> <li>beforeResolve：全局解析守卫，在<strong>导航被确认之前，但在所有组件内守卫和异步路由组件被解析之后调用</strong> <ul><li>上面两个其实就是执行的时机一前一后</li></ul></li> <li>afterEach：全局后置守卫，<strong>在导航确认后触发</strong>的钩子函数。该钩子函数执行后会触发 DOM 更新，用户看到新的页面。
<ul><li>思考🤔：既然导航都已经确认了，这里安插一个守卫干嘛呢？</li> <li>全局后置守卫经常用于如下的场景：
<ol><li>记录页面访问历史：可以使用 afterEach 来记录用户访问的页面，以便进行统计或分析。</li> <li>关闭加载指示器：在 beforeEach 中开启加载指示器，在 afterEach 中关闭它，以提供更好的用户体验。</li> <li>页面切换动画：在 afterEach 中触发页面切换动画或其他视觉效果，以提升用户体验。</li> <li>更新文档标题：在导航完成后更新页面标题，以反映当前页面内容。</li></ol></li></ul></li></ul></li> <li><p>路由守卫 beforeEnter：<strong>针对特定路由设置的守卫</strong>，因此设置的方式也不再是在 router 路由实例上面设置，而是在某个路由配置中设置。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/users/:id'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> UserDetails<span class="token punctuation">,</span>
    <span class="token comment">// 在路由的配置中进行设置，只针对特定的路由进行拦截</span>
    <span class="token function-variable function">beforeEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// reject the navigation</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>相关细节：</p> <ol><li><p>beforeEnter 守卫<strong>只在进入路由时触发</strong>，<strong>不会在 params、query 或 hash 改变时触发</strong>。</p> <ul><li>从 /users/2 进入到 /users/3 这种不会触发</li> <li>从 /users/2#info 进入到 /users/2#projects 这种也不会触发</li></ul></li> <li><p>如果放在父级路由上，路由在具有相同父级的子路由之间移动时，它不会被触发。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>
    <span class="token function">beforeEnter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> UserList <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'details'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> UserDetails <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>从 /user/list 跳转到 /user/details 不会触发路由级别守卫。</p></li></ol></li> <li><p>组件守卫：这种守卫是组件级别，取决于是否进入或者离开某个组件</p> <ul><li>beforeRouteEnter：进入了该导航，组件开始渲染之前</li> <li>beforeRouteUpdate：当前路由改变，但是该组件被复用时调用，例如对于一个带有动态参数的路径 /users/:id，在 /users/1 和 /users/2 之间跳转的时候会触发</li> <li>beforeRouteLeave：离开了该导航，组件失活的时候</li></ul></li></ol> <p>整体的执行顺序：</p> <ol><li>组件离开守卫</li> <li>全局前置守卫</li> <li>路由级别守卫</li> <li>全局解析守卫</li> <li>全局后置守卫</li> <li>组件进入守卫</li></ol> <p>如果是组件复用，参数变化的情况，执行顺序如下：</p> <ol><li>全局前置守卫</li> <li>组件更新守卫</li> <li>全局解析守卫</li> <li>全局后置守卫</li></ol> <p><strong>其他细节</strong></p> <p><strong>1. 路由级别守卫beforeEnter设置多个值</strong></p> <p>路由级别守卫，也就是 beforeEnter 可以<strong>设置成一个数组，数组里面包含多个方法</strong>，每个方法进行一项处理。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// ...</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'About'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> About<span class="token punctuation">,</span>
    <span class="token literal-property property">beforeEnter</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Route beforeEnter step 1'</span><span class="token punctuation">)</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Route beforeEnter step 2'</span><span class="token punctuation">)</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>2. 在守卫内的全局注入</strong></p> <p>从 <strong>Vue 3.3</strong> 开始，你可以在导航守卫内使用 inject() 方法。这在注入像 pinia stores 这样的全局属性时很有用。</p> <p>在 app.provide() 中提供的所有内容都可以在全局守卫里面获取到。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'global'</span><span class="token punctuation">,</span> <span class="token string">'some data'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// router.js</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'global'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="路由零碎知识"><a href="#路由零碎知识" class="header-anchor">#</a> 路由零碎知识</h2> <p><strong>1. 别名</strong></p> <p>通过 alias 可以设置别名。</p> <p>假设有一个路由 /user/:id/profile 显示用户的个人资料，你希望能够通过 /profile/:id 也能访问到同样的组件，那么此时就可以通过别名的方式来进行配置，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user/:id/profile'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'user-profile'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> UserProfile<span class="token punctuation">,</span>
      <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'/profile/:id'</span> <span class="token comment">// 配置路由别名</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>别名的好处：</p> <ul><li>提供不同的访问路径：为同一个路由提供了多种访问方式，更加灵活</li> <li>兼容旧路径：有些时候需要更新路径，使用别名可以保证旧的路由依然有效</li> <li>简化路径：特别是嵌套路由的情况下，路径可能会很长，别名可以简化路径</li></ul> <p><strong>2. 命名视图</strong></p> <p>router-view 被称之为视图或者路由出口。</p> <p>有些时候会存在这样的需求，那就是<strong>一个路由对应多个组件</strong>，而非一个组件。<strong>不同的组件渲染到不同的视图里面</strong>，此时需要给视图设置不同的 name 来加以区分。</p> <p>例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      <span class="token comment">// 注意这里是 components，多了一个's'</span>
      <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">default</span><span class="token operator">:</span> Home<span class="token punctuation">,</span>
        <span class="token comment">// LeftSidebar: LeftSidebar 的缩写</span>
        LeftSidebar<span class="token punctuation">,</span>
        <span class="token comment">// 它们与 &lt;router-view&gt; 上的 name 属性匹配</span>
        RightSidebar<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>在上面的 components 配置中，对应了多个组件，所以视图也就提供多个：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view left-sidebar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LeftSidebar<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view main-content<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view right-sidebar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>RightSidebar<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>如果<strong>视图没有设置名字，那么默认为 default</strong>. 那些只配置了一个组件的路由，默认就渲染在 default 视图所在位置。</p> <p><strong>3. 重定向</strong></p> <p>通过 redirect 可以配置路由重定向，它允许你将一个路径重定向到另一个路径，当用户访问被重定向的路径时，浏览器的 URL 会自动更新到目标路径，并渲染目标路径对应的组件。</p> <p>redirect 对应的值可以有多种形式：</p> <ol><li><p>字符串</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> HomeView
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在这个示例中，当用户访问 /home 时，会被重定向到 /，并渲染 HomeView 组件。</p></li> <li><p>对象：可以使用对象来更详细地定义重定向，包括传递路径参数和查询参数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'profile'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token string">':id'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/profile/:userId'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'profile'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> UserProfile
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在这个示例中，当用户访问 /user/123 时，会被重定向到 /profile/123，并渲染 UserProfile 组件。</p></li> <li><p>函数：重定向函数可以根据路由信息动态生成重定向目标路径。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/old-path/:id'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">redirect</span><span class="token operator">:</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> params <span class="token punctuation">}</span> <span class="token operator">=</span> to<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/new-path/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/new-path/:id'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> NewPathComponent
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在这个示例中，当用户访问 /old-path/123 时，会被重定向到 /new-path/123，并渲染 NewPathComponent 组件。</p></li></ol> <p><strong>4. 路由元数据</strong></p> <p>元数据（meta fields）是一种附加到路由配置中的属性，用来存储与路由相关的<strong>附加信息</strong>。</p> <p>元数据经常用于权限控制、标题设置、面包屑导航、路由过渡之类的效果</p> <ol><li><p>定义元数据：添加一个 meta 配置项，该配置项对应的是一个对象，对象里面就是你自定义要添加的信息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> HomeView<span class="token punctuation">,</span>
      <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">requiresAuth</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Home'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> AboutView<span class="token punctuation">,</span>
      <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">requiresAuth</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'About Us'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>访问元数据：在导航守卫的回调函数中，会自动传入 to 这个参数（你要去哪里），通过 to.meta 就可以拿到元数据信息</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>requiresAuth <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isLoggedIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <p><strong>5. 路由懒加载</strong></p> <p>在新项目的模板代码中，官方路由示例的写法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> HomeView <span class="token keyword">from</span> <span class="token string">'../views/HomeView.vue'</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> HomeView
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span>
      <span class="token comment">// route level code-splitting</span>
      <span class="token comment">// this generates a separate chunk (About.[hash].js) for this route</span>
      <span class="token comment">// which is lazy-loaded when the route is visited.</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/AboutView.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre></div><p>可以看到，HomeView 是正常导入，而 AboutView 却有所不同。component 的配置对应的是一个返回 Promise 组件的函数，这种情况下，Vue Router 只会在第一次进入页面时才会获取这个函数，然后使用缓存数据。</p> <p>这意味着你也可以使用更复杂的函数，只要它们返回一个 Promise ：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">UserDetails</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">/* 组件定义 */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这样的组件导入方式被称之为动态导入，好处在于：</p> <ol><li>当路由被访问的时候才加载对应组件，这样就会更加高效</li> <li>进行打包的时候方便做<strong>代码分割</strong></li></ol> <p>另外注意，<strong>路由中不要再使用异步组件</strong>，也就是说下面的代码虽然可以使用，但是<strong>没有必要</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">const</span> asyncAboutView <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
	<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/AboutView.vue'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> asyncAboutView
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre></div><p>究其原因，是因为 <strong>Vue-router 内部会自动对动态导入做处理，转换为异步组件</strong>，<strong>开发者只需要书写动态导入组件的代码即可</strong>，无需再显式使用 defineAsyncComponent，这样更加简洁方便一些。</p> <h2 id="过渡特效"><a href="#过渡特效" class="header-anchor">#</a> 过渡特效</h2> <p><strong>1. 快速上手</strong></p> <p>为路由切换添加过渡效果，其实就是使用 Transition 内置组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fade<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>out-in<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2. 相关细节</strong></p> <ol><li><p>单个路由的过渡：</p> <ul><li>如果对不同的路由的过渡有需求，那么可以通过以下的设置来做：
<ul><li>meta：设置元数据，上面记录过渡的方式</li> <li>RouterView 插槽，通过插槽拿到 route，从而拿到元数据里面的过渡方式</li> <li>&lt;Transition&gt;组件设置不同的 name 值从而应用不同的过渡方式</li></ul></li></ul></li> <li><p>基于路由动态过渡</p> <p>这里可以使用导航守卫（全局后置守卫）来添加过渡效果</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'/panel-left'</span><span class="token operator">:</span>
      to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">'slide-left'</span>
      <span class="token keyword">break</span>
    <span class="token keyword">case</span> <span class="token string">'/panel-right'</span><span class="token operator">:</span>
      to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">'slide-right'</span>
      <span class="token keyword">break</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">'fade'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>使用Key：Vue 可能会<strong>自动复用看起来相似的组件</strong>，从而忽略了任何过渡，可以<strong>添加一个 key 属性</strong>来强制过渡。</p></li></ol> <h2 id="动态路由"><a href="#动态路由" class="header-anchor">#</a> 动态路由</h2> <p>这里的 router 就是通过 createRouter 方法创建的路由实例。</p> <ul><li><p>router.addRoute( )：动态的添加路由，只注册一个新的路由，如果要跳转到新路由需要手动 push 或者 replace.</p></li> <li><p>router.removeRoute(name)：动态的移除路由，除了此方法移除路由，还有几种方式</p> <ul><li><p>通过添加一个名称冲突的路由。如果添加与现有路由名称相同的路由，会先删除旧路由，再添加新路由：</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> About <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 这将会删除之前已经添加的路由，因为他们具有相同的 name</span>
router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/other'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Other <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>通过调用 router.addRoute( ) 返回的<strong>回调函数</strong>，调用该函数后可以删除添加的路由。当路由没有名称时，这很有用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> removeRoute <span class="token operator">=</span> router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span>routeRecord<span class="token punctuation">)</span>
<span class="token function">removeRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 删除路由如果存在的话</span>
</code></pre></div></li></ul></li></ul> <p>如果要添加嵌套的路由，可以将路由的 name 作为<strong>第一个参数</strong>传递给 router.addRoute( )</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Admin <span class="token punctuation">}</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'settings'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> AdminSettings <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这等价于：</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">component</span><span class="token operator">:</span> Admin<span class="token punctuation">,</span>
  <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'settings'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> AdminSettings <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>另外还有两个常用 API：</p> <ul><li>router.hasRoute(name)：检查路由是否存在。</li> <li>router.getRoutes( )：获取一个包含所有路由记录的数组。</li></ul> <h2 id="路由组件传参"><a href="#路由组件传参" class="header-anchor">#</a> 路由组件传参</h2> <p>路由组件传参是指<strong>将参数直接以 props 的形式传递给组件</strong>。</p> <p><strong>快速上手</strong></p> <p>假设有如下的动态路由：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> 
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/users/:userId(\\d+)'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> User
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>之后诸如 /users/1 就会匹配上该路由，其中 1 就是对应的参数。那么在组件中如何获取这个参数呢？</p> <ol><li><p>要么用 $route.params</p></li> <li><p>要么就是 useRoute( ) 方法获取到当前的路由</p></li></ol> <p>这些方式<strong>和路由是紧密耦合的</strong>，这限制了组件的灵活性，因为它<strong>只能用于特定的 URL</strong>.</p> <p>一种更好的方式，是将参数设置为组件的一个 props，这样能删除组件对 $route 的直接依赖。</p> <ol><li><p>首先在路由配置中开启 props</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user/:userId(\\d+)'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> User<span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div></li> <li><p>在组件内部设置 id 这个 props，之后路由参数就会以 props 的形式传递进来</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ol> <p><strong>相关细节</strong></p> <p>路由参数设置成组件 props，支持不同的模式：</p> <ol><li>布尔模式</li> <li>对象模式</li> <li>函数模式</li></ol> <p><strong>1. 布尔模式</strong></p> <p>当 props 设置为 true 时，route.params 将被设置为组件的 props。</p> <p>如果是命名视图，那么需要为每个命名视图定义 props 配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> User<span class="token punctuation">,</span> <span class="token literal-property property">sidebar</span><span class="token operator">:</span> Sidebar <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">sidebar</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>2. 对象模式</strong></p> <p>当 props 设置为一个对象时候，回头传递到组件内部 props 的信息就是这个对象。</p> <p><strong>3. 函数模式</strong></p> <p>可以创建一个返回 props 的函数。这允许你将参数转换为其他类型，将静态值与基于路由的值相结合。</p> <p><strong>RouterView插槽设置props</strong></p> <p>还可以在 RouterView 里面设置 props，例如：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterView</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span>
    <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">view-prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span>
   <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterView</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这种设置方式会让所有视图组件都接收 view-prop，相当于每个组件都设置了 view-prop 这个 props，使用时需考虑实际情况来用。</p> <h2 id="路由匹配语法"><a href="#路由匹配语法" class="header-anchor">#</a> 路由匹配语法</h2> <p><strong>1. 参数正则</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 这是一个动态路由</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/users/:userId'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>我们期望后面是一个用户的 id，/users/1、/users/2</p> <p>/users/abc 这种形式依然能够匹配上</p> <p>参数就可以设置为正则的方式.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 这是一个动态路由</span>
  <span class="token comment">// 第一个 \ 是转义字符</span>
  <span class="token comment">// 后面的 \d 代表数字的意思</span>
  <span class="token comment">// 最后的 + 表示数字可以有1个或者多个</span>
  <span class="token comment">// 这里用于限制参数的类型</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/users/:userId(\\d+)'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>现在该路由后面的参数就只能匹配数字。</p> <p><strong>2. 重复参数</strong></p> <p>可以设置参数的重复次数，+ 表示 1 或者多次，* 表示 0 或者多次</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 注意这里是写在参数后面的，用于限制参数出现的次数</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/product/:name+'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>/product/one：能够匹配，name 参数的值为 <code>[&quot;one&quot;]</code></li> <li>/product/one/two：能够匹配，name 参数的值为 <code>[&quot;one&quot;, &quot;two&quot;]</code></li> <li>/product/one/two/three：能够匹配，name 参数的值为 <code>[&quot;one&quot;, &quot;two&quot;, &quot;three&quot;]</code></li> <li>/product：不能匹配，因为要求参数至少要有1个</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/product/:name*'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>/product：能够匹配，name 参数的值为 <code>[]</code></li> <li>/product/one：能够匹配，name 参数的值为 <code>[&quot;one&quot;]</code></li> <li>/product/one/two：能够匹配，name 参数的值为 <code>[&quot;one&quot;, &quot;two&quot;]</code></li></ul> <p>可以和自定义正则一起使用，将重复次数符号放在自定义正则表达式后面：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 前面的 (\\d+) 是限制参数的类型</span>
  <span class="token comment">// 最后的 + 是限制参数的次数</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/product/:id(\\d+)+'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>/product/123 ：能够匹配，id 参数的值为 <code>[&quot;123&quot;]</code></li> <li>/product/123/456：能够匹配，id 参数的值为 <code>[&quot;123&quot;, &quot;456&quot;]</code></li> <li>/product/123/456/789：能够匹配，id 参数的值为 <code>[&quot;123&quot;, &quot;456&quot;, &quot;789&quot;]</code></li> <li>/product/abc：不能匹配，因为 abc 不是数字</li> <li>/product/123/abc：不能匹配，因为 abc 不是数字</li> <li>/product/：不能匹配，因为至少需要一个数字</li></ul> <p><strong>3. 可选参数</strong></p> <p>可以通过使用 ? 修饰符(0 个或 1 个)将一个参数标记为可选：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/users/:userId?'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>/users：能够匹配，可以没有 userId 这个参数</li> <li>/users/posva：能够匹配，userId 参数的值为 <code>[&quot;posva&quot;]</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 这里就是对参数类型进行了限制</span>
  <span class="token comment">// 参数可以没有，如果有的话，必须是数字</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/users/:userId(\\d+)?'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>/users：能够匹配，因为可以没有参数</li> <li>/users/42：能够匹配，有参数并且参数是数字</li> <li>/users/abc：不匹配，因为参数不是数字</li></ul> <p><strong>4.  sensitive与strict</strong></p> <p>默认情况下，所有路由是<strong>不区分大小写</strong>的，并且<strong>能匹配带有或不带有尾部斜线的路由</strong>。</p> <p>例如，路由 /users 将匹配 /users、/users/、甚至 /Users/。</p> <p>这种行为可以通过 strict 和 sensitive 选项来修改：</p> <ul><li>sensitive：指定路径匹配是否对<strong>大小写敏感</strong>，默认 false</li> <li>strict：指定路径匹配是否严格要求<strong>结尾的斜杠</strong>，默认 false</li></ul> <p>它们既可以应用在整个全局路由上，又可以应用于当前路由上：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 这个sensitive是局部应用</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/users/:id'</span><span class="token punctuation">,</span> <span class="token literal-property property">sensitive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">strict</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 这个strict是全局应用</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>
</code></pre></div><ul><li>/users/posva：能够匹配</li> <li>/users/posva/：不能够匹配，因为 strict 是 true，不允许有多余的尾部斜线</li> <li>/Users/posva：不能够匹配，因为 sensitive 是 true，严格区分大小写</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/users/:id?'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">strict</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>
</code></pre></div><ul><li>/users：能够匹配，因为 id 是可选</li> <li>/Users：能够匹配，因为默认不区分大小写</li> <li>/users/42：能够匹配，这里会匹配上 id 参数</li> <li>/users/：不能匹配，因为 strict 是 true，不允许有多余的尾部斜线</li> <li>/users/42/：不能匹配，因为 strict 是 true，不允许有多余的尾部斜线</li></ul> <p>最后官方推荐了一个 <a href="https://paths.esm.dev/?p=AAMeJSyAwR4UbFDAFxAcAGAIJXMAAA.." target="_blank" rel="noopener noreferrer">路径排名调试工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，可以用于了解为什么一个路由没有被匹配，或者报告一个 bug.</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/time-corner/%E6%A1%86%E6%9E%B6/ReactNative/" class="prev">
          ReactNative
        </a></span> <span class="next"><a href="/time-corner/框架/构建工具/Vite.html">
          Vite
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#什么是前端路由" class="sidebar-link reco-side-什么是前端路由" data-v-b57cc07c>什么是前端路由</a></li><li class="level-2" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#vue生态的前端路由" class="sidebar-link reco-side-vue生态的前端路由" data-v-b57cc07c>Vue生态的前端路由</a></li><li class="level-2" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#路由模式" class="sidebar-link reco-side-路由模式" data-v-b57cc07c>路由模式</a></li><li class="level-2" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#内置组件和函数" class="sidebar-link reco-side-内置组件和函数" data-v-b57cc07c>内置组件和函数</a></li><li class="level-3" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#内置组件" class="sidebar-link reco-side-内置组件" data-v-b57cc07c>内置组件</a></li><li class="level-3" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#内置函数" class="sidebar-link reco-side-内置函数" data-v-b57cc07c>内置函数</a></li><li class="level-2" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#导航守卫" class="sidebar-link reco-side-导航守卫" data-v-b57cc07c>导航守卫</a></li><li class="level-2" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#路由零碎知识" class="sidebar-link reco-side-路由零碎知识" data-v-b57cc07c>路由零碎知识</a></li><li class="level-2" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#过渡特效" class="sidebar-link reco-side-过渡特效" data-v-b57cc07c>过渡特效</a></li><li class="level-2" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#动态路由" class="sidebar-link reco-side-动态路由" data-v-b57cc07c>动态路由</a></li><li class="level-2" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#路由组件传参" class="sidebar-link reco-side-路由组件传参" data-v-b57cc07c>路由组件传参</a></li><li class="level-2" data-v-b57cc07c><a href="/time-corner/%E6%A1%86%E6%9E%B6/VueRouter.html#路由匹配语法" class="sidebar-link reco-side-路由匹配语法" data-v-b57cc07c>路由匹配语法</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/time-corner/assets/js/app.0d27a2ae.js" defer></script><script src="/time-corner/assets/js/7.164cc000.js" defer></script><script src="/time-corner/assets/js/2.39a09933.js" defer></script><script src="/time-corner/assets/js/1.f4e644ad.js" defer></script><script src="/time-corner/assets/js/159.a9ce9724.js" defer></script>
  </body>
</html>
